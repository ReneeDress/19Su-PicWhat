<!--pages/filter/filter.wxml-->
<view class="bg"/>
<view style="display: flex; flex-direction: column; align-items: center; justify-content: center; padding-top: {{windowHeight*0.183}}px;">
  <view class="circle green" style="position: fixed; left: {{windowWidth*0.88}}px; top: {{windowHeight*0.48}}px; width: {{windowWidth+6}}px; height: {{windowWidth+6}}px"/>
  <view class="circle green" style="position: fixed; left: {{-windowWidth*0.3889}}px; top: {{windowHeight*0.1834}}px; width: {{windowWidth+6}}px; height: {{windowWidth+6}}px"/>
  <button wx:if="{{ifupload}}" class="sbtn color" style="width: {{windowWidth*0.1932}}px; height: {{windowHeight*0.04619}}px; position: fixed; left: {{windowWidth*0.03865}}px; top: {{windowHeight*0.02582}}px;" bindtap="index">返回首页</button>
  <view style="display: flex; flex-direction: column; align-items: center; justify-content: center; padding-top: 0px">
    <span wx:if="{{!ifupload}}" class="title" style="padding-left: {{windowWidth*0.5}}px; white-space: nowrap; font-size: {{windowWidth*0.12}}px">色彩滤镜</span>
    <view wx:if="{{ifupload}}" class="pic" style="position: fixed; top: {{windowHeight*0.088}}px; width: {{windowWidth*0.96}}px; height: {{windowHeight*0.75}}px; background: url({{doneImage}}) no-repeat; background-size: contain; background-position: center; display: flex; flex-direction: column; align-items: center; justify-content: center;">
      <!-- <image src="{{loading}}" mode="aspectFit" style="width: 100%; height: 100%; diaplay: {{none}}" /> -->
      <canvas wx:if="{{showone}}" canvas-id="filter" style="margin: 0px; width: {{windowWidth*0.96}}px; height: {{windowHeight*0.75}}px;"></canvas>
      <span wx:if="{{ifupload&!showone}}" class="footer" >{{loading}}</span>
    </view>
    <view wx:if="{{!ifupload}}" style="padding-top: {{windowHeight*0.55}}px;">
      <button class="rbtn color" style="width: {{windowWidth*0.31}}px; height: {{windowHeight*0.07745}}px;" bindtap="choose_image">选择图片</button>
    </view>
    <view wx:if="{{ifupload}}" style="display: flex; flex-direction: column; align-items: center; justify-content: center; padding-top: {{windowHeight*0.67}}px">
      <view style="display: flex; flex-direction: column; align-items: center; justify-content: center; padding-top: 0px; height: {{windowHeight*0.07472}}px; width: {{windowWidth*0.96}}px;">
        <view wx:if="{{!showone&!showtwo}}" style="display: flex; flex-direction: row; align-items: center; justify-content: center; padding-top: 0px; height: 50%; width: {{windowWidth*0.96}}px;">
          <view class="mode" style="border: solid 2px {{ifone}};" bindtap="one" id="0">物品滤镜</view>
          <view class="mode" style="border: solid 2px {{iftwo}};" bindtap="two">胶片滤镜</view>
        </view>
        <view wx:elif="{{showone&!showtwo}}" class="showlist" style="display: flex; flex-direction: row; align-items: center; justify-content: center; padding-top: 0px;">
          <view class="back" bindtap="disone"> {{back}} </view>
          <view wx:for="{{filter}}" class="filter {{cur == index?'selected':''}}" bindtap="filter" id="{{index}}">{{item}}</view>
        </view>
        <view wx:elif="{{!showone&showtwo}}" class="showlist" style="display: flex; flex-direction: row; align-items: center; justify-content: center; padding-top: 0px;">
          <view class="back" bindtap="distwo"> {{back}} </view>
          <view wx:for="{{film}}" class="filter {{cur == index?'selected':''}}" bindtap="film" id="{{index}}">{{item}}</view>
        </view>
      </view>
      <view style="display: flex; flex-direction: row; align-items: center; justify-content: center; margin-top: 0px; padding-top: {{windowHeight*0.01}}px">
        <button class="sbtn color" style="width: {{windowWidth*0.1932}}px; height: {{windowHeight*0.04619}}px; margin: {{windowWidth*0.077}}px; margin-top: 0px;" bindtap="choose_image">重新选择</button>
        <span class="footer" style="white-space: nowrap; margin: {{windowWidth*0.077}}px; margin-top: 0px;">色彩滤镜</span>
        <button class="sbtn color" style="width: {{windowWidth*0.1932}}px; height: {{windowHeight*0.04619}}px; margin: {{windowWidth*0.077}}px; margin-top: 0px;" bindtap="done">完成处理</button>
      </view>
    </view>
  </view>

</view>
